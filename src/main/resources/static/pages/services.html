<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D·ªãch V·ª•</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@300..900&family=Dancing+Script:wght@400..700&family=Lobster&family=Roboto:wght@100..900&display=swap" rel="stylesheet">
</head>
<style>
    /* Reset CSS */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: Arial, sans-serif;
    }

    /* Body */
    body {
        background-color: #FFFFFF;
        color: #333;
        line-height: 1.6;
    }

    /* Header & Navigation */
    header {
        background-color: rgb(245, 111, 133);
        text-align: center;
        padding: 20px;
    }

    .h1-first {
        color: white;
        font-size: 40px;
        font-family: "Lobster", sans-serif;
    }

    nav ul li {
        display: inline;
    }

    nav ul li a {
        color: white;
        text-decoration: none;
        font-weight: bold;
        padding: 10px 15px;
        transition: 0.3s;
    }

    nav ul li a:hover {
        background-color: #e74c3c;
        border-radius: 5px;
    }

    /* Footer */
    footer {
        background-color: rgb(245, 111, 133);
        color: white;
        text-align: center;
        padding: 15px;
        margin-top: 40px;
    }

    footer p {
        margin: 0;
    }

    footer a {
        color: #e74c3c;
        text-decoration: none;
        font-weight: bold;
    }

    /* Background Image Section */
    .anh-nen {
        background-image: url('../img/Brown and Beige Modern Skincare Product Presentation.png');
        width: 100%;
        height: 400px;
        background-attachment: fixed;
        background-position: center;
        background-size: cover;
        margin: 5px 0;
        border-radius: 20px;
        position: relative;
    }

    .h1-center {
        color: white;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 50px;
        text-align: center;
        font-family: "Dancing Script", cursive;
    }

    /* Section for Services */
    .h2-first {
        text-align: center;
        margin: 30px 0;
        color: #FF6699;
        font-family: "Dancing Script", cursive;
        font-size: 40px;
        line-height: 1.2;
    }

    .gach-ngang {
        width: 50%;
        margin: 30px auto;
        border-bottom: 1px solid #ccc;
    }

    /* Service Container */
    .div-first p {
        text-align: center;
        margin: 10px 0;
        color: #555;
    }

    /* Service Cards */
    .service-1 {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px; /* Kho·∫£ng c√°ch gi·ªØa c√°c th·∫ª */
        margin: 30px 0;
        padding: 0 20px;
        max-width: 1200px; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông container ƒë·ªÉ hi·ªÉn th·ªã 4 th·∫ª m·ªói h√†ng */
        margin-left: auto;
        margin-right: auto;
    }

    .title {
        background-color: #fff0f5;
        border: 2px solid #ffc0cb;
        border-radius: 20px;
        padding: 15px;
        width: calc(25% - 20px); /* Chi·ªÅu r·ªông m·ªói th·∫ª l√† 25% (1/4 container) tr·ª´ ƒëi kho·∫£ng c√°ch gap */
        min-width: 250px; /* Chi·ªÅu r·ªông t·ªëi thi·ªÉu ƒë·ªÉ kh√¥ng b·ªã co nh·ªè qu√° */
        min-height: 350px; /* Chi·ªÅu cao t·ªëi thi·ªÉu ƒë·ªÉ ƒë·ªìng ƒë·ªÅu */
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        cursor: pointer;
    }

    .title:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
        background: #ffe6ed;
    }

    .service-title {
        color: #e91e63;
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 10px;
        text-align: center;
    }

    .service-image {
        width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 15px;
        margin-bottom: 10px;
    }

    .title ul {
        padding-left: 15px;
        font-size: 14px;
        color: #444;
        flex-grow: 1;
    }

    .title li {
        margin-bottom: 8px;
    }

    /* Service Registration Link */
    .sub-dv {
        color: rgb(247, 82, 110);
        margin: 40px 0;
        text-align: center;
        font-size: 1.2em;
    }

    .sub-dv a {
        color: rgb(247, 82, 110);
        text-decoration: underline;
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
        .title {
            width: calc(50% - 20px); /* 2 th·∫ª m·ªói h√†ng tr√™n m√†n h√¨nh nh·ªè h∆°n */
        }
    }

    @media (max-width: 768px) {
        .h1-center {
            font-size: 35px;
        }

        .h2-first {
            font-size: 30px;
        }

        .title {
            width: 100%;
            max-width: 300px; /* 1 th·∫ª m·ªói h√†ng tr√™n m√†n h√¨nh r·∫•t nh·ªè */
        }

        .service-1 {
            padding: 0 10px;
        }
    }

    /* Additional Styling */
    ul {
        list-style-type: none;
    }

    ul li {
        margin-bottom: 10px;
    }

    /* Loading and Error Messages */
    .loading, .error-message, .no-services {
        text-align: center;
        color: #e91e63;
        font-size: 18px;
        margin: 20px 0;
    }
</style>
<body>
<header>
    <h2 class="h1-first">Miyazono Kaori</h2>
    <nav>
        <ul>
            <li><a href="../home.html">Trang Ch·ªß</a></li>
            <li><a href="../pages/services.html">D·ªãch V·ª•</a></li>
            <li><a href="../pages/about.html">Gi·ªõi Thi·ªáu</a></li>
            <li><a href="../pages/therapists.html">Chuy√™n Vi√™n</a></li>
            <li><a href="../pages/contact.html">Li√™n H·ªá</a></li>
            <li id="pay-ment"><a href="../pages/Payment.html">Thanh To√°n</a></li>
            <li id="logout-btn" style="display:none;"><a href="#" onclick="logout()">ƒêƒÉng xu·∫•t</a></li>

        </ul>
    </nav>
</header>

<div class="anh-nen">
    <h1 class="h1-center">D·ªãch V·ª• ChƒÉm S√≥c Chuy√™n S√¢u</h1>
</div>

<div class="div-first">
    <h2 class="h2-first">Kh√¥ng gian chƒÉm s√≥c s·∫Øc ƒë·∫πp ƒë·∫≥ng c·∫•p, n∆°i ch√∫ng t√¥i mang ƒë·∫øn <br> nh·ªØng d·ªãch v·ª• tinh t·∫ø, gi√∫p b·∫°n t·ªèa s√°ng!</h2>
    <p>üíñ V·ªõi ƒë·ªôi ng≈© chuy√™n vi√™n gi√†u kinh nghi·ªám v√† c√°c li·ªáu ph√°p chƒÉm s√≥c ti√™n ti·∫øn, ch√∫ng t√¥i cam k·∫øt mang l·∫°i tr·∫£i nghi·ªám th∆∞ gi√£n tuy·ªát v·ªùi c√πng <br> nh·ªØng k·∫øt qu·∫£ ƒë√°ng kinh ng·∫°c, gi√∫p b·∫°n lu√¥n t·ª± tin v√† r·∫°ng r·ª° m·ªói ng√†y.</p>
</div>

<div class="gach-ngang"></div>

<section id="services-section">
    <div class="service-1" id="services-container">
        <!-- Services will be dynamically loaded here -->
    </div>
</section>

<div class="sub-dv">
    <p><b>üåü H√£y ƒë·∫∑t l·ªãch ngay h√¥m nay ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n mi·ªÖn ph√≠ & tr·∫£i nghi·ªám d·ªãch v·ª• t·ªët nh·∫•t! üåü [<a href="../pages/booking.html">t·∫°i ƒë√¢y</a>]</b></p>
</div>

<footer>
    <p>&copy; M·ªçi th·∫Øc m·∫Øc ho·∫∑c khi·∫øu n·∫°i c·ªßa kh√°ch h√†ng t·∫°i Email: loclc8533@ut.edu.vn</p>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const servicesContainer = document.getElementById('services-container');

        // Hi·ªÉn th·ªã n√∫t ƒëƒÉng xu·∫•t n·∫øu ƒë√£ ƒëƒÉng nh·∫≠p
        const token = localStorage.getItem('token');
        if (token) {
            const logoutBtn = document.getElementById('logout-btn');
            if (logoutBtn) logoutBtn.style.display = 'inline';
        } else {
            alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ xem d·ªãch v·ª•.');
            window.location.href = 'login.html';
            return;
        }

        const role = localStorage.getItem("role")
        const pay = document.getElementById("pay-ment")
        if(role === "ADMIN"){
            pay.style.display ="inline"

        }else {
            pay.style.display ="none"
        }
        servicesContainer.innerHTML = '<div class="loading">ƒêang t·∫£i d·ªãch v·ª•...</div>';

        fetch("http://localhost:8080/api/services", {
            method: "GET",
            headers: {
                "Authorization": "Bearer " + token,
                "Content-Type": "application/json"
            },
            credentials: "include"
        })
            .then(response => {
                if (!response.ok) throw new Error('Kh√¥ng th·ªÉ t·∫£i danh s√°ch d·ªãch v·ª•.');
                return response.json();
            })
            .then(services => {
                servicesContainer.innerHTML = '';
                renderServices(services);
            })
            .catch(error => {
                servicesContainer.innerHTML = '<div class="error-message">Kh√¥ng th·ªÉ t·∫£i danh s√°ch d·ªãch v·ª•. Vui l√≤ng th·ª≠ l·∫°i sau.</div>';
                console.error(error);
            });

        function renderServices(services) {
            if (services.length === 0) {
                servicesContainer.innerHTML = '<div class="no-services">Kh√¥ng c√≥ d·ªãch v·ª• n√†o.</div>';
                return;
            }

            services.forEach((service, index) => {
                let descriptionPoints = service.description ? service.description.split('\n').filter(line => line.trim() !== '') : [];
                if (descriptionPoints.length <= 1) {
                    descriptionPoints = [service.description];
                }

                const listItemsHTML = descriptionPoints.map(point => `<li>${point}</li>`).join('');

                // N·∫øu kh√¥ng c√≥ ·∫£nh, d√πng ·∫£nh m·∫∑c ƒë·ªãnh
                const imageUrl = service.imageUrl || '../img/hinh-dat-lich.png';

                const serviceArticle = document.createElement('article');
                serviceArticle.classList.add('title');
                serviceArticle.innerHTML = `
            <img src="${imageUrl}" alt="Service Image" class="service-image">
            <h3 class="service-title">${index + 1}. ${service.name}</h3>
            <ul>${listItemsHTML}</ul>

        `;
                servicesContainer.appendChild(serviceArticle);
            });
        }

    });

    // H√†m x·ª≠ l√Ω ƒëƒÉng xu·∫•t
    function logout() {
        localStorage.removeItem("token");
        alert("B·∫°n ƒë√£ ƒëƒÉng xu·∫•t!");
        window.location.href = "login.html";
    }
</script>
</body>
</html>
